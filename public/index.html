<!DOCTYPE html>
<html>
<head>
	<title>Ping Pong Game</title>
</head>
<body>
	<canvas id="canvas"></canvas>
	<script>
		var cv = document.getElementById('canvas');
		cv.width = window.innerWidth;
		cv.height = window.innerHeight;

	</script>
	<script type="text/javascript" src="js/app.js">
	</script>
	<script type="text/javascript">
		app.width = window.innerWidth;
		app.height = window.innerHeight;
		//Sample functions, remove these functions and design ping-pong game with onInit and onUpdate.
		function redBoxInput(e){
			if(e.key === 'w'){
					app.getNode('red-box').direction = -1;
				}
				if(e.key === 's'){
					app.getNode('red-box').direction = 1;
				}
		}
		function noRedBoxInput(e){
			if(e.key === 'w' || e.key === 's'){
					app.getNode('red-box').direction = 0;
				}
		}
		function blackBoxInput(e){
			if(e.key === 'ArrowUp'){
					app.getNode('black-box').direction = -1;
				}
				if(e.key === 'ArrowDown'){
					app.getNode('black-box').direction = 1;
				}
		}
		function noBlackBoxInput(e){
			if(e.key === 'ArrowUp' || e.key === 'ArrowDown'){
					app.getNode('black-box').direction = 0;
				}
		}
		app.onInit = function(){
			this.nodes.push({
				id : 'red-box',
				x  : 50,
				y  : app.height/2,
				width  : 50,
				height : 100,
				color  : 'red',
				direction : 0

			});

			this.nodes.push({
				id : 'black-box',
				x  : app.width-50,
				y  : app.height/2,
				width  : 50,
				height : 100,
				color  : 'black',
				direction : 0
			});
			document.addEventListener('keydown',(e)=>{
				switch(e.key){
					case 'w':
						this.getNode('red-box').y--;
						//console.log(this.getNode('red-box').y);
						break;
					case 's':
						this.getNode('red-box').y++;
						//console.log(this.getNode('red-box').y);
						break;
					case 'ArrowUp':
						console.log("goes up");
						this.getNode('black-box').y--;
						break;
					case 'ArrowDown':
						console.log("goes down");
						this.getNode('black-box').y++;
						break;
				}
			});
			window.addEventListener('keydown',redBoxInput,false);
			window.addEventListener('keyup',noRedBoxInput,false);

			window.addEventListener('keydown',blackBoxInput,false);
			window.addEventListener('keyup',noBlackBoxInput,false);
		};

		app.onUpdate = function(time){
			app.getNode('black-box').y+=app.getNode('black-box').direction;
			app.getNode('red-box').y+=app.getNode('red-box').direction;
		};
	</script>
</body>
</html>